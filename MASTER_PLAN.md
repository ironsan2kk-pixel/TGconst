# üîß –ú–ê–°–¢–ï–†-–ü–õ–ê–ù: Telegram-–±–æ—Ç –ø—Ä–æ–¥–∞–∂–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–Ω–∞–ª–∞–º

**–í–µ—Ä—Å–∏—è:** 4.0  
**–î–∞—Ç–∞:** –Ø–Ω–≤–∞—Ä—å 2025  
**–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** Windows Server  
**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –û–¥–∏–Ω –±–æ—Ç, SQLite, –¥–≤–∞ —è–∑—ã–∫–∞ (RU/EN)

---

## üìå –û–ë–©–ï–ï –û–ü–ò–°–ê–ù–ò–ï

### –ß—Ç–æ —ç—Ç–æ?
Telegram-–±–æ—Ç –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –∫–∞–Ω–∞–ª–∞–º —á–µ—Ä–µ–∑ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—É (CryptoBot/USDT).

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- **–û–¥–∏–Ω –±–æ—Ç** ‚Äî –ø—Ä–æ—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –ª–µ–≥–∫–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å
- **–ü–∞–∫–µ—Ç—ã –∫–∞–Ω–∞–ª–æ–≤** ‚Äî –æ–¥–∏–Ω —Ç–∞—Ä–∏—Ñ = –¥–æ—Å—Ç—É–ø –∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –∫–∞–Ω–∞–ª–∞–º
- **–î–≤–∞ —è–∑—ã–∫–∞** ‚Äî —Ä—É—Å—Å–∫–∏–π –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —Å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º
- **–ü—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥** ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞
- **Deep Links** ‚Äî –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ç–∞—Ä–∏—Ñ—ã
- **–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è** ‚Äî –æ –ø—Ä–æ–¥–ª–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏
- **–†—É—á–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ** ‚Äî –∞–¥–º–∏–Ω –º–æ–∂–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–ø–ª–∞—Ç—É –≤—Ä—É—á–Ω—É—é
- **–ü–æ–ª–Ω–∞—è –∞–¥–º–∏–Ω–∫–∞** ‚Äî –≤–µ–±-–ø–∞–Ω–µ–ª—å —Å —Ç—ë–º–Ω–æ–π —Ç–µ–º–æ–π –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω—É** ‚Äî –æ –Ω–æ–≤—ã—Ö —é–∑–µ—Ä–∞—Ö –∏ –ø–æ–∫—É–ø–∫–∞—Ö

### –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:
- **Windows Server** ‚Äî .bat —Ñ–∞–π–ª—ã —Å UTF-8 –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π
- **Python 3.11+** ‚Äî –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ venv
- **SQLite** ‚Äî –æ–¥–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö bot.db

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –°–ò–°–¢–ï–ú–´

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 –ê–î–ú–ò–ù-–ü–ê–ù–ï–õ–¨ (React + –¢—ë–º–Ω–∞—è —Ç–µ–º–∞)              ‚îÇ
‚îÇ  –î–∞—à–±–æ—Ä–¥ ‚îÇ –ö–∞–Ω–∞–ª—ã ‚îÇ –¢–∞—Ä–∏—Ñ—ã ‚îÇ –Æ–∑–µ—Ä—ã ‚îÇ –ü—Ä–æ–º–æ–∫–æ–¥—ã ‚îÇ –†–∞—Å—Å—ã–ª–∫–∏       ‚îÇ
‚îÇ  –ì—Ä–∞—Ñ–∏–∫–∏ ‚îÇ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ ‚îÇ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚îÇ –†—É—á–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ REST API
                             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      BACKEND (FastAPI)                          ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ                    bot.db (SQLite)                         ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  settings ‚îÇ channels ‚îÇ tariffs ‚îÇ tariff_channels           ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  users ‚îÇ subscriptions ‚îÇ payments ‚îÇ promocodes             ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  broadcasts ‚îÇ custom_buttons ‚îÇ admin_logs                  ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ Subscription ‚îÇ  ‚îÇ  Broadcast   ‚îÇ  ‚îÇ  Reminder Service    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ   Checker    ‚îÇ  ‚îÇ   Worker     ‚îÇ  ‚îÇ  (–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è)       ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚ñº              ‚ñº              ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ TELEGRAM ‚îÇ  ‚îÇ CRYPTOBOT ‚îÇ  ‚îÇ  USERBOT  ‚îÇ
        ‚îÇ   BOT    ‚îÇ  ‚îÇ    API    ‚îÇ  ‚îÇ (Pyrogram)‚îÇ
        ‚îÇ (Aiogram)‚îÇ  ‚îÇ  –ü–ª–∞—Ç–µ–∂–∏  ‚îÇ  ‚îÇ –ò–Ω–≤–∞–π—Ç—ã   ‚îÇ
        ‚îÇ  RU/EN   ‚îÇ  ‚îÇ   USDT    ‚îÇ  ‚îÇ   –ö–∏–∫–∏    ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üóÑÔ∏è –°–¢–†–£–ö–¢–£–†–ê –ë–ê–ó–´ –î–ê–ù–ù–´–•

### –§–∞–π–ª: `data/bot.db`

---

### –¢–∞–±–ª–∏—Ü–∞: `settings`
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| key | TEXT PK | –ö–ª—é—á –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |
| value | TEXT | –ó–Ω–∞—á–µ–Ω–∏–µ (JSON) |
| updated_at | TIMESTAMP | –û–±–Ω–æ–≤–ª–µ–Ω–æ |

```
–ö–ª—é—á–∏:
- bot_token: —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
- cryptobot_token: —Ç–æ–∫–µ–Ω CryptoBot (–º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º)
- admin_ids: [123456789] ‚Äî Telegram ID –∞–¥–º–∏–Ω–æ–≤
- welcome_message_ru: –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ RU
- welcome_message_en: –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ EN
- support_url: —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É
- default_language: ru | en
- reminder_days: [3, 1] ‚Äî –∑–∞ —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –Ω–∞–ø–æ–º–∏–Ω–∞—Ç—å
- bot_username: @username –±–æ—Ç–∞ (–¥–ª—è deep links)
```

---

### –¢–∞–±–ª–∏—Ü–∞: `channels`
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | INTEGER PK | ID |
| channel_id | BIGINT UNIQUE | Telegram ID –∫–∞–Ω–∞–ª–∞ |
| username | TEXT | @username (–±–µ–∑ @) |
| title | TEXT | –ù–∞–∑–≤–∞–Ω–∏–µ |
| description | TEXT | –û–ø–∏—Å–∞–Ω–∏–µ |
| invite_link | TEXT | –ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ |
| is_active | INTEGER | 0/1 |
| sort_order | INTEGER | –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ |
| created_at | TIMESTAMP | –°–æ–∑–¥–∞–Ω |

---

### –¢–∞–±–ª–∏—Ü–∞: `tariffs`
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | INTEGER PK | ID |
| name_ru | TEXT | –ù–∞–∑–≤–∞–Ω–∏–µ RU |
| name_en | TEXT | –ù–∞–∑–≤–∞–Ω–∏–µ EN |
| description_ru | TEXT | –û–ø–∏—Å–∞–Ω–∏–µ RU |
| description_en | TEXT | –û–ø–∏—Å–∞–Ω–∏–µ EN |
| price | REAL | –¶–µ–Ω–∞ USDT |
| duration_days | INTEGER | –°—Ä–æ–∫ (–¥–Ω–∏), 0 = –Ω–∞–≤—Å–µ–≥–¥–∞ |
| trial_days | INTEGER | –ü—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥ (0 = –Ω–µ—Ç) |
| is_active | INTEGER | 0/1 |
| sort_order | INTEGER | –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ |
| created_at | TIMESTAMP | –°–æ–∑–¥–∞–Ω |

---

### –¢–∞–±–ª–∏—Ü–∞: `tariff_channels` (–º–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º)
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | INTEGER PK | ID |
| tariff_id | INTEGER FK | –¢–∞—Ä–∏—Ñ |
| channel_id | INTEGER FK | –ö–∞–Ω–∞–ª |

---

### –¢–∞–±–ª–∏—Ü–∞: `users`
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | INTEGER PK | ID |
| telegram_id | BIGINT UNIQUE | Telegram ID |
| username | TEXT | @username |
| first_name | TEXT | –ò–º—è |
| last_name | TEXT | –§–∞–º–∏–ª–∏—è |
| language | TEXT | ru / en |
| is_banned | INTEGER | –ó–∞–±–∞–Ω–µ–Ω: 0/1 |
| ban_reason | TEXT | –ü—Ä–∏—á–∏–Ω–∞ –±–∞–Ω–∞ |
| utm_source | TEXT | –ò—Å—Ç–æ—á–Ω–∏–∫ —Ç—Ä–∞—Ñ–∏–∫–∞ |
| created_at | TIMESTAMP | –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ |
| last_activity | TIMESTAMP | –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å |

---

### –¢–∞–±–ª–∏—Ü–∞: `subscriptions`
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | INTEGER PK | ID |
| user_id | INTEGER FK | –Æ–∑–µ—Ä |
| tariff_id | INTEGER FK | –¢–∞—Ä–∏—Ñ |
| is_trial | INTEGER | –ü—Ä–æ–±–Ω—ã–π: 0/1 |
| starts_at | TIMESTAMP | –ù–∞—á–∞–ª–æ |
| expires_at | TIMESTAMP | –ö–æ–Ω–µ—Ü (NULL = –Ω–∞–≤—Å–µ–≥–¥–∞) |
| is_active | INTEGER | 0/1 |
| auto_kicked | INTEGER | –ë—ã–ª –∫–∏–∫: 0/1 |
| reminded_3_days | INTEGER | –ù–∞–ø–æ–º–Ω–∏–ª–∏ –∑–∞ 3 –¥–Ω—è: 0/1 |
| reminded_1_day | INTEGER | –ù–∞–ø–æ–º–Ω–∏–ª–∏ –∑–∞ 1 –¥–µ–Ω—å: 0/1 |
| granted_by | TEXT | manual / payment / trial |
| granted_by_admin | INTEGER | ID –∞–¥–º–∏–Ω–∞ (–µ—Å–ª–∏ manual) |
| created_at | TIMESTAMP | –°–æ–∑–¥–∞–Ω |

---

### –¢–∞–±–ª–∏—Ü–∞: `payments`
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | INTEGER PK | ID |
| user_id | INTEGER FK | –Æ–∑–µ—Ä |
| tariff_id | INTEGER FK | –¢–∞—Ä–∏—Ñ |
| subscription_id | INTEGER FK | –ü–æ–¥–ø–∏—Å–∫–∞ (–ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã) |
| invoice_id | TEXT UNIQUE | ID –∏–Ω–≤–æ–π—Å–∞ CryptoBot |
| amount | REAL | –°—É–º–º–∞ USDT |
| original_amount | REAL | –°—É–º–º–∞ –¥–æ —Å–∫–∏–¥–∫–∏ |
| currency | TEXT | USDT |
| promocode_id | INTEGER | –ü—Ä–æ–º–æ–∫–æ–¥ (–µ—Å–ª–∏ –±—ã–ª) |
| status | TEXT | pending / paid / expired / cancelled / manual |
| payment_type | TEXT | crypto / manual |
| confirmed_by | INTEGER | ID –∞–¥–º–∏–Ω–∞ (–µ—Å–ª–∏ manual) |
| paid_at | TIMESTAMP | –û–ø–ª–∞—á–µ–Ω |
| created_at | TIMESTAMP | –°–æ–∑–¥–∞–Ω |

---

### –¢–∞–±–ª–∏—Ü–∞: `promocodes`
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | INTEGER PK | ID |
| code | TEXT UNIQUE | –ö–æ–¥ (uppercase) |
| discount_percent | INTEGER | –°–∫–∏–¥–∫–∞ % (0-100) |
| discount_amount | REAL | –§–∏–∫—Å. —Å–∫–∏–¥–∫–∞ USDT |
| max_uses | INTEGER | –õ–∏–º–∏—Ç (NULL = –±–µ–∑–ª–∏–º–∏—Ç) |
| used_count | INTEGER | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π |
| valid_from | TIMESTAMP | –î–µ–π—Å—Ç–≤—É–µ—Ç —Å |
| valid_until | TIMESTAMP | –î–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ |
| tariff_id | INTEGER | –¢–æ–ª—å–∫–æ –¥–ª—è —Ç–∞—Ä–∏—Ñ–∞ (NULL = –≤—Å–µ) |
| is_active | INTEGER | 0/1 |
| created_at | TIMESTAMP | –°–æ–∑–¥–∞–Ω |

---

### –¢–∞–±–ª–∏—Ü–∞: `promocode_uses`
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | INTEGER PK | ID |
| promocode_id | INTEGER FK | –ü—Ä–æ–º–æ–∫–æ–¥ |
| user_id | INTEGER FK | –Æ–∑–µ—Ä |
| payment_id | INTEGER FK | –ü–ª–∞—Ç—ë–∂ |
| used_at | TIMESTAMP | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω |

---

### –¢–∞–±–ª–∏—Ü–∞: `broadcasts`
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | INTEGER PK | ID |
| message_text | TEXT | –¢–µ–∫—Å—Ç |
| message_photo | TEXT | –§–æ—Ç–æ (file_id) |
| buttons_json | TEXT | –ö–Ω–æ–ø–∫–∏ JSON |
| filter_type | TEXT | all / active / inactive / tariff_{id} |
| language | TEXT | all / ru / en |
| total_users | INTEGER | –í—Å–µ–≥–æ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π |
| sent_count | INTEGER | –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ |
| failed_count | INTEGER | –û—à–∏–±–æ–∫ |
| status | TEXT | draft / running / paused / completed / cancelled |
| scheduled_at | TIMESTAMP | –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ |
| started_at | TIMESTAMP | –ù–∞—á–∞–ª–æ |
| completed_at | TIMESTAMP | –ö–æ–Ω–µ—Ü |
| created_at | TIMESTAMP | –°–æ–∑–¥–∞–Ω |

---

### –¢–∞–±–ª–∏—Ü–∞: `custom_buttons`
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | INTEGER PK | ID |
| text_ru | TEXT | –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ RU |
| text_en | TEXT | –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ EN |
| type | TEXT | url / text |
| value | TEXT | URL –∏–ª–∏ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è |
| sort_order | INTEGER | –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ |
| is_active | INTEGER | 0/1 |

---

### –¢–∞–±–ª–∏—Ü–∞: `admin_logs`
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | INTEGER PK | ID |
| admin_id | BIGINT | Telegram ID –∞–¥–º–∏–Ω–∞ |
| action | TEXT | –î–µ–π—Å—Ç–≤–∏–µ |
| target_user_id | INTEGER | –ù–∞ –∫–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏–µ |
| details | TEXT | JSON —Å –¥–µ—Ç–∞–ª—è–º–∏ |
| created_at | TIMESTAMP | –ö–æ–≥–¥–∞ |

---

### –¢–∞–±–ª–∏—Ü–∞: `analytics_daily`
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | INTEGER PK | ID |
| date | DATE UNIQUE | –î–∞—Ç–∞ |
| new_users | INTEGER | –ù–æ–≤—ã—Ö —é–∑–µ—Ä–æ–≤ |
| active_users | INTEGER | –ê–∫—Ç–∏–≤–Ω—ã—Ö |
| payments_count | INTEGER | –ö–æ–ª-–≤–æ –ø–ª–∞—Ç–µ–∂–µ–π |
| payments_amount | REAL | –°—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π |
| new_subscriptions | INTEGER | –ù–æ–≤—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫ |
| expired_subscriptions | INTEGER | –ò—Å—Ç—ë–∫—à–∏—Ö –ø–æ–¥–ø–∏—Å–æ–∫ |

---

## üõ†Ô∏è –¢–ï–•–ù–û–õ–û–ì–ò–ß–ï–°–ö–ò–ô –°–¢–ï–ö

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è |
|-----------|------------|--------|
| **Backend API** | FastAPI | 0.109+ |
| **ORM** | SQLAlchemy | 2.0+ |
| **Async SQLite** | aiosqlite | 0.19+ |
| **Telegram Bot** | Aiogram | 3.3+ |
| **Userbot** | Pyrogram | 2.0+ |
| **–ö—Ä–∏–ø—Ç–æ-–æ–ø–ª–∞—Ç–∞** | CryptoBot API | ‚Äî |
| **Frontend** | React + Vite | 18+ |
| **UI** | Tailwind CSS | 3.4+ |
| **–ì—Ä–∞—Ñ–∏–∫–∏** | Recharts | 2.10+ |
| **–¢–µ–º–∞** | Dark/Light mode | ‚Äî |
| **HTTP Client** | httpx | 0.26+ |
| **Auth** | python-jose + passlib | ‚Äî |

---

## üìÅ –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

```
telegram-channel-bot/
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ MASTER_PLAN.md
‚îú‚îÄ‚îÄ CHECKLIST.md
‚îú‚îÄ‚îÄ CLAUDE_INSTRUCTION.md
‚îÇ
‚îú‚îÄ‚îÄ data/                           # –î–∞–Ω–Ω—ã–µ (–≤ .gitignore)
‚îÇ   ‚îú‚îÄ‚îÄ bot.db                      # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ backups/                    # –ë—ç–∫–∞–ø—ã –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ logs/                       # –õ–æ–≥–∏
‚îÇ
‚îú‚îÄ‚îÄ bot/                            # Telegram –±–æ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ run.py                      # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ loader.py                   # Bot, Dispatcher
‚îÇ   ‚îú‚îÄ‚îÄ config.py                   # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ database.py                 # SQLite
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ models/                     # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ settings.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ channel.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tariff.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ subscription.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ promocode.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ broadcast.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ custom_button.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin_log.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ analytics.py
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ handlers/                   # –•–µ–Ω–¥–ª–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ start.py                # /start + deep links
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ menu.py                 # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tariffs.py              # –¢–∞—Ä–∏—Ñ—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment.py              # –û–ø–ª–∞—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ promocode.py            # –ü—Ä–æ–º–æ–∫–æ–¥—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ subscription.py         # –ú–æ–∏ –ø–æ–¥–ø–∏—Å–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ language.py             # –°–º–µ–Ω–∞ —è–∑—ã–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ custom_buttons.py       # –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin.py                # –ê–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ keyboards/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ inline.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ reply.py
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ callbacks/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tariff.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ language.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin.py
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ middlewares/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ i18n.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ban.py
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cryptobot.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ subscription.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ subscription_checker.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reminder.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ broadcast.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ notifications.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ analytics.py
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ helpers.py
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ locales/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ ru.py
‚îÇ       ‚îî‚îÄ‚îÄ en.py
‚îÇ
‚îú‚îÄ‚îÄ userbot/                        # Pyrogram Userbot
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ run.py
‚îÇ   ‚îú‚îÄ‚îÄ config.py
‚îÇ   ‚îú‚îÄ‚îÄ client.py
‚îÇ   ‚îî‚îÄ‚îÄ actions/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ invite.py
‚îÇ       ‚îî‚îÄ‚îÄ kick.py
‚îÇ
‚îú‚îÄ‚îÄ admin/                          # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å Backend
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ run.py
‚îÇ   ‚îú‚îÄ‚îÄ config.py
‚îÇ   ‚îú‚îÄ‚îÄ database.py
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deps.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ channels.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tariffs.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ subscriptions.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payments.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ promocodes.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ broadcasts.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ buttons.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ settings.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ webhooks.py
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ schemas/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (–≤—Å–µ —Å—Ö–µ–º—ã)
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îî‚îÄ‚îÄ security.py
‚îÇ
‚îú‚îÄ‚îÄ frontend/                       # React –∞–¥–º–∏–Ω–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îú‚îÄ‚îÄ vite.config.js
‚îÇ   ‚îú‚îÄ‚îÄ tailwind.config.js
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îÇ       ‚îú‚îÄ‚îÄ main.jsx
‚îÇ       ‚îú‚îÄ‚îÄ App.jsx
‚îÇ       ‚îú‚îÄ‚îÄ ThemeContext.jsx        # –¢—ë–º–Ω–∞—è —Ç–µ–º–∞
‚îÇ       ‚îú‚îÄ‚îÄ api/
‚îÇ       ‚îú‚îÄ‚îÄ components/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Layout.jsx
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Sidebar.jsx
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ ThemeToggle.jsx
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Charts/
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RevenueChart.jsx
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UsersChart.jsx
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ConversionChart.jsx
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ       ‚îú‚îÄ‚îÄ pages/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Login.jsx
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Dashboard.jsx       # –° –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Analytics.jsx       # –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Channels/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Tariffs/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Users/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Subscriptions/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Payments/           # + —Ä—É—á–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Promocodes/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Broadcasts/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Buttons/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ Settings/
‚îÇ       ‚îî‚îÄ‚îÄ hooks/
‚îÇ
‚îî‚îÄ‚îÄ scripts/                        # Windows .bat —Ñ–∞–π–ª—ã
    ‚îú‚îÄ‚îÄ install.bat                 # –£—Å—Ç–∞–Ω–æ–≤–∫–∞
    ‚îú‚îÄ‚îÄ start_bot.bat               # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
    ‚îú‚îÄ‚îÄ start_admin.bat             # –ó–∞–ø—É—Å–∫ –∞–¥–º–∏–Ω–∫–∏
    ‚îú‚îÄ‚îÄ start_userbot.bat           # –ó–∞–ø—É—Å–∫ userbot
    ‚îú‚îÄ‚îÄ start_all.bat               # –ó–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ
    ‚îú‚îÄ‚îÄ stop_all.bat                # –û—Å—Ç–∞–Ω–æ–≤–∫–∞
    ‚îú‚îÄ‚îÄ setup_db.bat                # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
    ‚îú‚îÄ‚îÄ backup_db.bat               # –ë—ç–∫–∞–ø –ë–î
    ‚îî‚îÄ‚îÄ generate_session.bat        # Pyrogram session
```

---

## ‚öôÔ∏è –ü–ï–†–ï–ú–ï–ù–ù–´–ï –û–ö–†–£–ñ–ï–ù–ò–Ø (.env)

```env
# === APP ===
DEBUG=true
SECRET_KEY=your-super-secret-key-change-this

# === DATABASE ===
DATABASE_PATH=./data/bot.db

# === TELEGRAM BOT ===
BOT_TOKEN=123456789:AABBCCDDEEFFgghhiijjkkllmmnn
BOT_USERNAME=your_bot_username

# === CRYPTOBOT (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ===
CRYPTOBOT_TOKEN=
CRYPTOBOT_WEBHOOK_SECRET=

# === USERBOT (Pyrogram) ===
USERBOT_API_ID=12345678
USERBOT_API_HASH=your_api_hash
USERBOT_PHONE=+79001234567
USERBOT_SESSION_STRING=

# === ADMIN PANEL ===
ADMIN_USERNAME=admin
ADMIN_PASSWORD=changeme123
JWT_SECRET_KEY=your-jwt-secret
JWT_EXPIRE_MINUTES=1440

# === ADMIN NOTIFICATIONS ===
ADMIN_TELEGRAM_IDS=123456789

# === REMINDERS ===
REMINDER_DAYS=3,1

# === SERVER ===
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000
BOT_WEBHOOK_URL=
```

---

## ü§ñ –§–£–ù–ö–¶–ò–û–ù–ê–õ TELEGRAM –ë–û–¢–ê

### –ö–æ–º–∞–Ω–¥—ã:
| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| /start | –ó–∞–ø—É—Å–∫, –≤—ã–±–æ—Ä —è–∑—ã–∫–∞ |
| /start tariff_5 | Deep link –Ω–∞ —Ç–∞—Ä–∏—Ñ |
| /menu | –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é |
| /tariffs | –°–ø–∏—Å–æ–∫ —Ç–∞—Ä–∏—Ñ–æ–≤ |
| /my | –ú–æ–∏ –ø–æ–¥–ø–∏—Å–∫–∏ |
| /language | –°–º–µ–Ω–∏—Ç—å —è–∑—ã–∫ |
| /support | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ |
| /admin | –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (–¥–ª—è –∞–¥–º–∏–Ω–æ–≤) |
| /stats | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–¥–ª—è –∞–¥–º–∏–Ω–æ–≤) |

### Deep Links:
```
https://t.me/bot_username?start=tariff_5    ‚Üí –ü—Ä—è–º–æ –∫ —Ç–∞—Ä–∏—Ñ—É
https://t.me/bot_username?start=ref_source  ‚Üí –° UTM –º–µ—Ç–∫–æ–π
```

### –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø—Ä–æ–¥–ª–µ–Ω–∏–∏:
- –ó–∞ 3 –¥–Ω—è: "–í–∞—à–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ 3 –¥–Ω—è. –ü—Ä–æ–¥–ª–∏—Ç–µ —Å–µ–π—á–∞—Å!"
- –ó–∞ 1 –¥–µ–Ω—å: "–ó–∞–≤—Ç—Ä–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç –ø–æ–¥–ø–∏—Å–∫–∞! –ü—Ä–æ–¥–ª–∏—Ç–µ, —á—Ç–æ–±—ã –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å –¥–æ—Å—Ç—É–ø."
- –ü—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏: "–ü–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–ª–∞. –î–æ—Å—Ç—É–ø –∑–∞–∫—Ä—ã—Ç."

### –ê–¥–º–∏–Ω –≤ –±–æ—Ç–µ (/admin):
```
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
üë§ –ù–∞–π—Ç–∏ —é–∑–µ—Ä–∞
‚ûï –í—ã–¥–∞—Ç—å –¥–æ—Å—Ç—É–ø
‚ûñ –ó–∞–±—Ä–∞—Ç—å –¥–æ—Å—Ç—É–ø
üí∞ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–ø–ª–∞—Ç—É
üö´ –ó–∞–±–∞–Ω–∏—Ç—å
‚úÖ –†–∞–∑–±–∞–Ω–∏—Ç—å
üì® –†–∞—Å—Å—ã–ª–∫–∞
```

---

## üñ•Ô∏è –§–£–ù–ö–¶–ò–û–ù–ê–õ –ê–î–ú–ò–ù-–ü–ê–ù–ï–õ–ò

### Dashboard:
- –ö–∞—Ä—Ç–æ—á–∫–∏: —é–∑–µ—Ä—ã, –ø–æ–¥–ø–∏—Å–∫–∏, –¥–æ—Ö–æ–¥ —Å–µ–≥–æ–¥–Ω—è/–º–µ—Å—è—Ü
- –ì—Ä–∞—Ñ–∏–∫ –¥–æ—Ö–æ–¥–∞ –∑–∞ 30 –¥–Ω–µ–π (Recharts)
- –ì—Ä–∞—Ñ–∏–∫ –Ω–æ–≤—ã—Ö —é–∑–µ—Ä–æ–≤
- –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞:
- –î–æ—Ö–æ–¥ –ø–æ –¥–Ω—è–º/–Ω–µ–¥–µ–ª—è–º/–º–µ—Å—è—Ü–∞–º
- –ö–æ–Ω–≤–µ—Ä—Å–∏—è (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ ‚Üí –ø–æ–∫—É–ø–∫–∏)
- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã
- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ —á–∞—Å–∞–º

### –ü–ª–∞—Ç–µ–∂–∏:
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–ª–∞—Ç–µ–∂–µ–π
- –§–∏–ª—å—Ç—Ä—ã –ø–æ —Å—Ç–∞—Ç—É—Å—É
- **–†—É—á–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ** ‚Äî –∫–Ω–æ–ø–∫–∞ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–ø–ª–∞—Ç—É"
- –°–æ–∑–¥–∞–Ω–∏–µ —Ä—É—á–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞

### –¢—ë–º–Ω–∞—è —Ç–µ–º–∞:
- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤ header
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
- –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã

---

## üìä –≠–¢–ê–ü–´ –†–ê–ó–†–ê–ë–û–¢–ö–ò (8 —á–∞—Ç–æ–≤)

### –ß–ê–¢ 1: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫
- requirements.txt, .env.example, .gitignore
- SQLAlchemy –º–æ–¥–µ–ª–∏ (–≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã)
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
- –ë–∞–∑–æ–≤—ã–π FastAPI
- Windows .bat —Ñ–∞–π–ª—ã (UTF-8)

### –ß–ê–¢ 2: Telegram –±–æ—Ç ‚Äî –Ø–¥—Ä–æ
- Aiogram 3 –±–æ—Ç
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è RU/EN
- Middleware
- /start + Deep Links
- –ú–µ–Ω—é, —Ç–∞—Ä–∏—Ñ—ã
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∞–º

### –ß–ê–¢ 3: CryptoBot –æ–ø–ª–∞—Ç–∞
- CryptoBot API –∫–ª–∏–µ–Ω—Ç
- –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–æ–π—Å–æ–≤
- Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫

### –ß–ê–¢ 4: Userbot
- Pyrogram client
- –ê–≤—Ç–æ–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª—ã
- –ê–≤—Ç–æ–∫–∏–∫ –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏

### –ß–ê–¢ 5: –ü–æ–¥–ø–∏—Å–∫–∏ –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- Subscription checker
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∑–∞ 3 –∏ 1 –¥–µ–Ω—å
- –ê–≤—Ç–æ–∫–∏–∫
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (daily stats)

### –ß–ê–¢ 6: –§–∏—á–∏ –±–æ—Ç–∞
- –ü—Ä–æ–º–æ–∫–æ–¥—ã
- –ú–æ–∏ –ø–æ–¥–ø–∏—Å–∫–∏
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
- –ê–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã –≤ –±–æ—Ç–µ
- –†—É—á–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã

### –ß–ê–¢ 7: –†–∞—Å—Å—ã–ª–∫–∏
- –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å—Å—ã–ª–æ–∫
- –§–∏–ª—å—Ç—Ä—ã –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π
- –§–æ–Ω–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
- –ü—Ä–æ–≥—Ä–µ—Å—Å –∏ —Å—Ç–∞—Ç—É—Å—ã

### –ß–ê–¢ 8: –ê–¥–º–∏–Ω–∫–∞ Frontend
- React + Tailwind
- –¢—ë–º–Ω–∞—è —Ç–µ–º–∞
- Dashboard —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
- –í—Å–µ CRUD —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- –†—É—á–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏

---

## üìù –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–¢–ö–ò

### Windows .bat —Ñ–∞–π–ª—ã:
- –ö–æ–¥–∏—Ä–æ–≤–∫–∞: UTF-8 —Å BOM –∏–ª–∏ `chcp 65001`
- –ü—É—Ç–∏: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `%~dp0` –¥–ª—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—É—Ç–µ–π
- Python: `python` –∏–ª–∏ `py -3`

### Deep Links:
```
/start tariff_{id}  ‚Üí –ü–µ—Ä–µ—Ö–æ–¥ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Ç–∞—Ä–∏—Ñ—É
/start ref_{source} ‚Üí UTM –º–µ—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ user.utm_source
```

### –†—É—á–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã:
1. –Æ–∑–µ—Ä –ø–∏—à–µ—Ç "–æ–ø–ª–∞—Ç–∏–ª –≤—Ä—É—á–Ω—É—é"
2. –ê–¥–º–∏–Ω –≤ –ø–∞–Ω–µ–ª–∏ –≤–∏–¥–∏—Ç pending –ø–ª–∞—Ç—ë–∂
3. –ê–¥–º–∏–Ω –Ω–∞–∂–∏–º–∞–µ—Ç "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"
4. –°–æ–∑–¥–∞—ë—Ç—Å—è –ø–æ–¥–ø–∏—Å–∫–∞, —é–∑–µ—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –∫–∞–Ω–∞–ª—ã

### –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
- –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–æ—á—å—é (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- –§–ª–∞–≥–∏ reminded_3_days, reminded_1_day

---

## üöÄ –ì–û–¢–û–í–û –ö –†–ê–ë–û–¢–ï

**–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –Ω–∞—á–∞–ª–∞:**
> "–ß–∞—Ç 1"

**–§–æ—Ä–º–∞—Ç —Ä–∞–±–æ—Ç—ã:**
1. –¢—ã –ø–∏—à–µ—à—å "–ß–∞—Ç N"
2. –Ø –¥–µ–ª–∞—é –í–°–Å –∏–∑ —ç—Ç–∞–ø–∞
3. –í—ã–≥—Ä—É–∂–∞—é –≤ GitHub —Ä–µ–ø–æ
4. –ü–∏—à—É "–ø—Ä–æ–≤–µ—Ä–∏–º"
5. –¢—ã –ø—Ä–æ–≤–µ—Ä—è–µ—à—å, –ø–∏—à–µ—à—å "–ø—Ä–æ–≤–µ—Ä–∫–∞"
6. –Ø –ø—Ä–æ–≤–µ—Ä—è—é —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
7. –û–±–Ω–æ–≤–ª—è—é CHECKLIST.md –≤ —Ä–µ–ø–æ

---

**–ñ–¥—É –∫–æ–º–∞–Ω–¥—É "–ß–∞—Ç 1"!**
