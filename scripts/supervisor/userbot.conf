[program:bot-constructor-userbot]
; Основная команда запуска
command=/opt/telegram-bot-constructor/venv/bin/python /opt/telegram-bot-constructor/userbot/run.py

; Рабочая директория
directory=/opt/telegram-bot-constructor

; Пользователь для запуска процесса
user=www-data

; Автозапуск при старте supervisor
autostart=true

; Автоматический перезапуск при падении
autorestart=true

; Время ожидания перед признанием процесса запущенным
startsecs=5

; Количество попыток перезапуска
startretries=3

; Время ожидания при остановке
stopwaitsecs=10

; Перенаправление stderr в stdout
redirect_stderr=true

; Логирование
stdout_logfile=/var/log/supervisor/userbot.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=5

; Переменные окружения
environment=
    PYTHONPATH="/opt/telegram-bot-constructor",
    PYTHONUNBUFFERED="1"

; Приоритет запуска (после backend)
priority=200

; ============================================
; ИНСТРУКЦИЯ ПО НАСТРОЙКЕ:
; ============================================
;
; 1. Скопируйте этот файл:
;    sudo cp userbot.conf /etc/supervisor/conf.d/
;
; 2. Измените пути:
;    - /opt/telegram-bot-constructor → путь к вашему проекту
;    - /opt/telegram-bot-constructor/venv → путь к виртуальному окружению
;
; 3. ВАЖНО: Перед запуском userbot необходимо:
;    - Получить API_ID и API_HASH на https://my.telegram.org
;    - Сгенерировать session string: python scripts/generate_session.py
;    - Добавить данные в .env файл
;
; 4. При необходимости измените пользователя (user)
;
; 5. Перечитайте конфигурацию supervisor:
;    sudo supervisorctl reread
;    sudo supervisorctl update
;
; 6. Управление:
;    sudo supervisorctl start bot-constructor-userbot
;    sudo supervisorctl stop bot-constructor-userbot
;    sudo supervisorctl restart bot-constructor-userbot
;    sudo supervisorctl status
;
; ============================================
